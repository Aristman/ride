<div class="multi-block-container">
    {{#each blocks}}
        <div class="block-item" data-block-type="{{type}}" data-order="{{order}}">
            {{#if (eq type "terminal")}}
                {{> terminal-output this}}
            {{else if (eq type "code_block")}}
                {{> code-block this}}
            {{else if (eq type "tool_result")}}
                {{> tool-result this}}
            {{else if (eq type "markdown")}}
                <div class="markdown-block">
                    <div class="markdown-content">{{{content}}}</div>
                </div>
            {{else if (eq type "html")}}
                <div class="html-block">
                    {{{content}}}
                </div>
            {{else if (eq type "structured")}}
                <div class="structured-block">
                    <div class="structured-header">
                        <span class="format-label">{{format}}</span>
                        <button class="toggle-structured" onclick="toggleStructured(this)">â–¼</button>
                    </div>
                    <div class="structured-content">
                        <pre class="structured-data"><code class="language-{{format}}">{{content}}</code></pre>
                    </div>
                </div>
            {{/if}}
        </div>
        {{#unless @last}}
            <div class="block-separator"></div>
        {{/unless}}
    {{/each}}
</div>