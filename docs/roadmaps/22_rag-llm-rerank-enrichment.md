# ROADMAP: RAG-–æ–±–æ–≥–∞—â–µ–Ω–∏–µ —Å LLM-—Ä–µ—Ä–∞–Ω–∫–µ—Ä–æ–º –∏ —Ñ–∞–π–ª–æ–≤–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
- **–°—Ç–∞—Ç—É—Å**: üìã –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ
- **–í–µ—Ä—Å–∏—è**: 0.1.0
- **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-10-30
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: –ö–æ–º–∞–Ω–¥–∞ Ride AI

## üéØ –¶–µ–ª–∏ —Ñ–∏—á–∏
- –ü–æ–≤—ã—Å–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å RAG-–æ–±–æ–≥–∞—â–µ–Ω–∏—è –∑–∞ —Å—á—ë—Ç LLM-—Ä–µ—Ä–∞–Ω–∫–µ—Ä–∞ –ø–æ–≤–µ—Ä—Ö —à–∏—Ä–æ–∫–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- –û–±–æ–≥–∞—â–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —á–∞–Ω–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏–∑ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π MCP-—Ä–µ—Å—É—Ä—Å
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ UI –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—É—é —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

## üß© –û–±–ª–∞—Å—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ù–æ–≤–∞—è –º–µ—Ç–æ–¥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–≤–µ—Ä—Ö —Ç–µ–∫—É—â–µ–≥–æ `ChatService`
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: `ragCandidateK` (30‚Äì100, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60), `ragTopK` (1‚Äì10, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5)
- –ó–∞–¥–µ–π—Å—Ç–≤—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –±–∞–∑—É —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –∏ MCP-—Ñ–∞–π–ª–æ–≤—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- –°–æ–±–ª—é–¥–∞–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ < 4 c –ø—Ä–∏ —Ç–∏–ø–æ–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ

## ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–æ–¥—Ö–æ–¥
- Clean Architecture: –≤—ã–Ω–µ—Å—Ç–∏ –Ω–æ–≤—ã–π –ø–∞–π–ø–ª–∞–π–Ω –≤ `domain`/`application` —Å–ª–æ–π, UI/Infra —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- SOLID: –≤—ã–¥–µ–ª–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `RagAugmentationStrategy`, —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é `LlmRerankAugmentation`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π orchestrator (–∏–ª–∏ –∞–¥–∞–ø—Ç–µ—Ä), –¥–æ–±–∞–≤–ª—è–µ–º —ç—Ç–∞–ø—ã: Retrieval ‚Üí LLM rerank ‚Üí MCP enrichment ‚Üí Final prompt

## üìÖ –§–∞–∑—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### Phase 1 ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [x] –°–ø–µ—Ü–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (`RagRetriever`, `ChunkEnricher`, `LlmReranker`)
- [x] –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `PluginSettingsState`/`PluginSettings`: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ragCandidateK` –∏ `ragTopK`
- [x] –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–≥—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ (30‚Äì100, 1‚Äì10) –∏ –¥–µ—Ñ–æ–ª—Ç—ã (60 –∏ 5)
- [x] –û–±–Ω–æ–≤–∏—Ç—å `SettingsConfigurable` (—Ç–µ–∫—Å—Ç—ã –ø–æ–¥—Å–∫–∞–∑–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ setters)

### Phase 2 ‚Äî Retrieval –∏ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –≤ `EmbeddingService` —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- [ ] –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —á–∞–Ω–∫–æ–≤ (id, similarity, fileRef) –µ–¥–∏–Ω—ã–º DTO
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ –∏ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- [ ] –ü–æ–∫—Ä—ã—Ç—å –º–æ–¥—É–ª—å–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ similarity

### Phase 3 ‚Äî LLM-—Ä–µ—Ä–∞–Ω–∫–µ—Ä
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å `ChunkRelevanceEvaluator` –¥–ª—è –≤—ã–∑–æ–≤–∞ LLM —Å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏ –∏ –∑–∞–ø—Ä–æ—Å–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ–º–ø—Ç–∞ –∏ –æ—Ç–≤–µ—Ç–∞ (—Å–ø–∏—Å–æ–∫ chunkId –≤ –ø–æ—Ä—è–¥–∫–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞, –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ–ª–ª–±—ç–∫ –Ω–∞ —Ç–æ–ø-N –ø–æ similarity –ø—Ä–∏ —Å–±–æ–µ LLM

### Phase 4 ‚Äî –û–±–æ–≥–∞—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ MCP
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª–æ–≤—ã–π MCP-—Ä–µ—Å—É—Ä—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ chunkId
- [ ] –û–ø–∏—Å–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ (–º–µ—Ä–¥–∂ —á–∞–Ω–∫–∞ + –¥–æ–ø. –¥–∞–Ω–Ω—ã–µ, –∫–æ–Ω—Ç—Ä–æ–ª—å —Ç–æ–∫–µ–Ω–æ–≤)
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã/—Å—Ç—Ä–æ–∫–∏ –¥–ª—è UI (—Ñ–æ—Ä–º–∞—Ç URI –¥–ª—è –∫–ª–∏–∫–æ–≤)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ ob–æ–≥–∞—â—ë–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞

### Phase 5 ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —á–∞—Ç –∏ UI
- [ ] –í—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –≤ `ChatService` —Å –≤—ã–±–æ—Ä–æ–º –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `ChatContentRenderer` –∏ `JcefChatView` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫
- [ ] –û–±–µ—Å–ø–µ—á–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞ (ragMethod, –∏—Å—Ç–æ—á–Ω–∏–∫, —à–∞–≥–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å UI-—Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ —Å—Å—ã–ª–æ–∫

### Phase 6 ‚Äî –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (retrievalTime, rerankTime, enrichmentTime)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∑–∞–ø—Ä–æ—Å–∞ —Å –º–æ–∫–∞–º–∏ MCP –∏ LLM
- [ ] –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–ª–∞–Ω –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–∞—Ö –≤ UI

## üé® –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ –±–µ–∑ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –∑–∞–¥–µ—Ä–∂–µ–∫
- –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∑–Ω–∞–Ω–∏–π —Å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏
- –†–∞—Å—à–∏—Ä—è–µ–º—ã–π –ø–∞–π–ø–ª–∞–π–Ω RAG, –≥–æ—Ç–æ–≤—ã–π –¥–ª—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
- –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∫–µ—à –æ—Ç–≤–µ—Ç–æ–≤ —Ä–µ—Ä–∞–Ω–∫–µ—Ä–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –∫–∞—á–µ—Å—Ç–≤—É –æ—Ç–≤–µ—Ç–æ–≤ –¥–æ –∏ –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
