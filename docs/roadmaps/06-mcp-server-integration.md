—ë—ë# Roadmap: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MCP Server –≤ Ride Plugin

## –¶–µ–ª—å

–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å MCP Server Rust –≤ –ø–ª–∞–≥–∏–Ω Ride —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π, –∑–∞–ø—É—Å–∫–æ–º –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ Chat Agent —á–µ—Ä–µ–∑
Yandex GPT Tools API.

## –ó–∞–¥–∞—á–∏

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ MCP Server

- [x] –°–æ–∑–¥–∞—Ç—å `MCPServerManager` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å–µ—Ä–≤–µ—Ä–∞
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ –∏–∑ —Ä–µ—Å—É—Ä—Å–æ–≤
    - [x] –î–æ–±–∞–≤–∏—Ç—å fallback –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å GitHub Releases
    - [x] –î–æ–±–∞–≤–∏—Ç—å fallback –Ω–∞ —Å–±–æ—Ä–∫—É –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
    - [x] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É health endpoint
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å graceful shutdown
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Gradle –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ —É–ø–∞–∫–æ–≤–∫–∏ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤
    - [ ] –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É `buildMCPServer`
    - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ –≤ resources
    - [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ `buildPlugin`
- [x] –°–æ–∑–¥–∞—Ç—å `RideStartupActivity` –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- [x] –°–æ–∑–¥–∞—Ç—å `RideApplicationListener` –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
- [x] –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ `plugin.xml`

### 2. UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è MCP Server

- [x] –°–æ–∑–¥–∞—Ç—å `MCPServerConfigurable` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
    - [x] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞ (Running/Stopped)
    - [x] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ Start/Stop
    - [ ] –î–æ–±–∞–≤–∏—Ç—å —á–µ–∫–±–æ–∫—Å "Auto-start on IDE startup"
    - [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "View Logs"
    - [x] –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ tools
- [x] –°–æ–∑–¥–∞—Ç—å –ø–∞–Ω–µ–ª—å —Å —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º—ã–º —Å–ø–∏—Å–∫–æ–º tools
    - [x] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–º—è tool
    - [x] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ
    - [x] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    - [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "Test Tool"
- [x] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ Settings

### 3. MCP Client –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º

- [x] –°–æ–∑–¥–∞—Ç—å `MCPClient` –∫–ª–∞—Å—Å
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö file operations
    - [x] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å retry –ª–æ–≥–∏–∫—É (–≤ HTTP client)
    - [x] –î–æ–±–∞–≤–∏—Ç—å timeout –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [x] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
    - [x] `FileRequest`, `FileResponse`
    - [x] `DirectoryRequest`, `DirectoryResponse`
    - [x] `MCPError`, `MCPException`
- [ ] –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è MCPClient

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Yandex GPT Tools API

- [x] –°–æ–∑–¥–∞—Ç—å `YandexGPTToolsProvider`
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ MCP tools –≤ Yandex format
    - [x] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É `tools` –ø–æ–ª—è –≤ –∑–∞–ø—Ä–æ—Å–µ
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É `toolCallList` –≤ –æ—Ç–≤–µ—Ç–µ
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É `toolResultList` –æ–±—Ä–∞—Ç–Ω–æ –≤ LLM
- [x] –û–±–Ω–æ–≤–∏—Ç—å `YandexGPTProvider` (—Å–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π YandexGPTToolsProvider)
    - [x] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `tools` –≤ –∑–∞–ø—Ä–æ—Å
    - [x] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `toolChoice` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–∑–æ–≤–∞–º–∏
    - [x] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `parallelToolCalls`
    - [x] –û–±—Ä–∞–±–æ—Ç–∞—Ç—å `toolCallList` –≤ –æ—Ç–≤–µ—Ç–µ
- [x] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏ –¥–ª—è Tools API
    - [x] `Tool`, `FunctionTool`
    - [x] `ToolCall`, `FunctionCall`
    - [x] `ToolResult`, `FunctionResult`
    - [x] `ToolChoice`

### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MCP Tools –≤ ChatAgent

- [x] –°–æ–∑–¥–∞—Ç—å `MCPToolsRegistry`
    - [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö tools
    - [x] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ tools (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –æ–±—ä–µ–∫—Ç)
    - [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
- [x] –°–æ–∑–¥–∞—Ç—å `MCPToolExecutor`
    - [x] –ü–∞—Ä—Å–∏–Ω–≥ `FunctionCall` –∏–∑ LLM –æ—Ç–≤–µ—Ç–∞
    - [x] –í—ã–∑–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ MCP endpoint
    - [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    - [x] –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ `ToolResult` –¥–ª—è LLM
- [x] –°–æ–∑–¥–∞—Ç—å `ChatAgentWithTools`
    - [x] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É tools –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ü–∏–∫–ª tool calling:
        1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å —Å tools
        2. –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç —Å toolCallList
        3. –í—ã–ø–æ–ª–Ω–∏—Ç—å tool calls —á–µ—Ä–µ–∑ MCPToolExecutor
        4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å toolResultList –æ–±—Ä–∞—Ç–Ω–æ –≤ LLM
        5. –ü–æ–ª—É—á–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
    - [x] –î–æ–±–∞–≤–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π (max 5)
    - [x] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ tool calls

### 6. –ú–∞–ø–ø–∏–Ω–≥ MCP Operations –Ω–∞ Yandex Tools

- [x] –°–æ–∑–¥–∞—Ç—å tool definitions –¥–ª—è file operations:
    - [x] `create_file` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
    - [x] `read_file` - —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
    - [x] `update_file` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
    - [x] `delete_file` - —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
    - [x] `list_files` - —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
- [x] –°–æ–∑–¥–∞—Ç—å tool definitions –¥–ª—è directory operations:
    - [x] `create_directory` - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    - [x] `delete_directory` - —É–¥–∞–ª–µ–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    - [x] `list_directory` - —Å–ø–∏—Å–æ–∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
- [x] –î–æ–±–∞–≤–∏—Ç—å JSON Schema –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–∞–∂–¥–æ–≥–æ tool

### 7. –û–±—Ä–∞–±–æ—Ç–∫–∞ Tool Calls

- [x] –°–æ–∑–¥–∞—Ç—å `MCPToolExecutor` (–æ–±—ä–µ–¥–∏–Ω–µ–Ω —Å ToolCallHandler)
    - [x] –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ tool call
    - [x] –ú–∞–ø–ø–∏–Ω–≥ –Ω–∞ MCP API endpoints
    - [x] –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ HTTP –∑–∞–ø—Ä–æ—Å–∞ –∫ MCP —Å–µ—Ä–≤–µ—Ä—É
    - [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ MCP —Å–µ—Ä–≤–µ—Ä–∞
    - [x] –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è LLM
- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
    - [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π (–¥–µ–ª–∞–µ—Ç—Å—è –≤ MCP Server)
    - [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤ (–¥–µ–ª–∞–µ—Ç—Å—è –≤ MCP Server)
    - [ ] Rate limiting –¥–ª—è tool calls

### 8. UI –∏–Ω–¥–∏–∫–∞—Ü–∏—è Tool Calls

- [x] –û–±–Ω–æ–≤–∏—Ç—å `ChatPanel`
    - [x] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "Executing tool..."
    - [x] –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∏–º—è –≤—ã–∑—ã–≤–∞–µ–º–æ–≥–æ tool
    - [ ] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    - [x] –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç tool call (–≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö)
- [x] –î–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π
    - [x] üîß –¥–ª—è tool execution
    - [ ] üìÑ –¥–ª—è file operations
    - [ ] üìÅ –¥–ª—è directory operations
    - [ ] ‚ö†Ô∏è –¥–ª—è –æ—à–∏–±–æ–∫

### 9. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] Unit —Ç–µ—Å—Ç—ã
    - [ ] `MCPServerManagerTest` - —Ç–µ—Å—Ç—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
    - [ ] `MCPClientTest` - —Ç–µ—Å—Ç—ã API –∫–ª–∏–µ–Ω—Ç–∞
    - [ ] `YandexGPTToolsProviderTest` - —Ç–µ—Å—Ç—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è tools
    - [ ] `MCPToolExecutorTest` - —Ç–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è tools
    - [ ] `ToolCallHandlerTest` - —Ç–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ calls
- [ ] Integration —Ç–µ—Å—Ç—ã
    - [ ] –¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞: –∑–∞–ø—Ä–æ—Å ‚Üí tool call ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    - [ ] –¢–µ—Å—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö tool calls
    - [ ] –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
    - [ ] –¢–µ—Å—Ç timeout –∏ retry
- [ ] UI —Ç–µ—Å—Ç—ã
    - [ ] –¢–µ—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞
    - [ ] –¢–µ—Å—Ç —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è —Å–ø–∏—Å–∫–∞ tools
    - [ ] –¢–µ—Å—Ç –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ tool calls –≤ —á–∞—Ç–µ

### 10. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ ] –û–±–Ω–æ–≤–∏—Ç—å README.md
    - [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é "MCP Server Integration"
    - [ ] –û–ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É
    - [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è tools
- [ ] –°–æ–∑–¥–∞—Ç—å docs/mcp-integration.md
    - [ ] –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
    - [ ] –û–ø–∏—Å–∞–Ω–∏–µ tool calling flow
    - [ ] –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ —Å tools
- [ ] –û–±–Ω–æ–≤–∏—Ç—å CHANGELOG.md
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –≤ docs/examples/

### 11. CI/CD –¥–ª—è MCP Server

- [ ] –°–æ–∑–¥–∞—Ç—å GitHub Actions workflow
    - [ ] –°–±–æ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
    - [ ] –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ GitHub Releases
    - [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–±–æ—Ä–∫—É –ø—Ä–∏ push –≤ main

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              ChatAgent                      ‚îÇ
‚îÇ  - –û–±—Ä–∞–±–æ—Ç–∫–∞ user message                  ‚îÇ
‚îÇ  - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ —Å tools             ‚îÇ
‚îÇ  - –û–±—Ä–∞–±–æ—Ç–∫–∞ tool calls                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         YandexGPTToolsProvider              ‚îÇ
‚îÇ  - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ MCP tools ‚Üí Yandex format ‚îÇ
‚îÇ  - –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ —Å tools                 ‚îÇ
‚îÇ  - –ü–∞—Ä—Å–∏–Ω–≥ toolCallList                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            MCPToolExecutor                  ‚îÇ
‚îÇ  - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ tool calls                    ‚îÇ
‚îÇ  - –í—ã–∑–æ–≤ MCPClient                          ‚îÇ
‚îÇ  - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ toolResultList              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              MCPClient                      ‚îÇ
‚îÇ  - HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ MCP Server                ‚îÇ
‚îÇ  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           MCP Server (Rust)                 ‚îÇ
‚îÇ  - File system operations                   ‚îÇ
‚îÇ  - REST API                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Tool Calling Flow

```
1. User: "–°–æ–∑–¥–∞–π —Ñ–∞–π–ª test.txt —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º Hello"
   ‚Üì
2. ChatAgent —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å —Å tools:
   {
     "messages": [...],
     "tools": [
       {
         "function": {
           "name": "create_file",
           "description": "Create a new file",
           "parameters": {...}
         }
       }
     ]
   }
   ‚Üì
3. Yandex GPT –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
   {
     "toolCallList": {
       "toolCalls": [
         {
           "functionCall": {
             "name": "create_file",
             "arguments": {
               "path": "test.txt",
               "content": "Hello"
             }
           }
         }
       ]
     }
   }
   ‚Üì
4. MCPToolExecutor –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
   POST http://localhost:3000/files
   {
     "path": "test.txt",
     "content": "Hello",
     "overwrite": false
   }
   ‚Üì
5. MCP Server –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
   {
     "path": "test.txt",
     "size": 5,
     "checksum": "..."
   }
   ‚Üì
6. ChatAgent –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç toolResultList:
   {
     "messages": [
       ...,
       {
         "role": "assistant",
         "toolCallList": {...}
       },
       {
         "role": "tool",
         "toolResultList": {
           "toolResults": [
             {
               "functionResult": {
                 "name": "create_file",
                 "content": "File created successfully"
               }
             }
           ]
         }
       }
     ]
   }
   ‚Üì
7. Yandex GPT –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:
   "–§–∞–π–ª test.txt —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º 'Hello'"
```

## –ü—Ä–∏–º–µ—Ä Tool Definition

```json
{
  "function": {
    "name": "create_file",
    "description": "Create a new file with specified content",
    "parameters": {
      "type": "object",
      "properties": {
        "path": {
          "type": "string",
          "description": "Relative path to the file"
        },
        "content": {
          "type": "string",
          "description": "Content of the file"
        },
        "overwrite": {
          "type": "boolean",
          "description": "Whether to overwrite existing file",
          "default": false
        }
      },
      "required": [
        "path",
        "content"
      ]
    },
    "strict": true
  }
}
```

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–¥–∞—á

1. **High Priority** (–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã)
    - –ó–∞–¥–∞—á–∏ 1, 3, 4, 5 - –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

2. **Medium Priority** (–í–∞–∂–Ω–æ –¥–ª—è UX)
    - –ó–∞–¥–∞—á–∏ 2, 8 - UI –∏ –∏–Ω–¥–∏–∫–∞—Ü–∏—è

3. **Low Priority** (–ú–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å)
    - –ó–∞–¥–∞—á–∏ 9, 10, 11 - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

- –ó–∞–¥–∞—á–∏ 1-3: ~8 —á–∞—Å–æ–≤
- –ó–∞–¥–∞—á–∏ 4-5: ~6 —á–∞—Å–æ–≤
- –ó–∞–¥–∞—á–∏ 6-7: ~4 —á–∞—Å–∞
- –ó–∞–¥–∞—á–∞ 8: ~2 —á–∞—Å–∞
- –ó–∞–¥–∞—á–∏ 9-11: ~4 —á–∞—Å–∞

**–ò—Ç–æ–≥–æ: ~24 —á–∞—Å–∞**

## –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

| –†–∏—Å–∫                             | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ     | –ú–∏—Ç–∏–≥–∞—Ü–∏—è                      |
|----------------------------------|-------------|-------------|--------------------------------|
| MCP Server –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è        | –°—Ä–µ–¥–Ω—è—è     | –í—ã—Å–æ–∫–æ–µ     | Fallback –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ/—Å–±–æ—Ä–∫—É  |
| Yandex GPT –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç tools | –ù–∏–∑–∫–∞—è      | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∑–∞—Ä–∞–Ω–µ–µ |
| Tool calls —Ä–∞–±–æ—Ç–∞—é—Ç –º–µ–¥–ª–µ–Ω–Ω–æ     | –°—Ä–µ–¥–Ω—è—è     | –°—Ä–µ–¥–Ω–µ–µ     | –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, async    |
| –ü—Ä–æ–±–ª–µ–º—ã —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é         | –°—Ä–µ–¥–Ω—è—è     | –í—ã—Å–æ–∫–æ–µ     | –í–∞–ª–∏–¥–∞—Ü–∏—è, rate limiting       |

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- ‚úÖ MCP Server –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- ‚úÖ –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- ‚úÖ –°–ø–∏—Å–æ–∫ tools –¥–æ—Å—Ç—É–ø–µ–Ω –∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ ChatAgent —É—Å–ø–µ—à–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç tools —á–µ—Ä–µ–∑ Yandex GPT
- ‚úÖ Tool calls –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ UI
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

1. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ tools (search, git operations)
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
3. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
5. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É custom tools –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
